<div class="popup-container">
  <div class="popup-content">
    <!-- Header (will not be printed) -->
    <div class="popup-header non-printable">
      <h5 class="popup-title">Detalles de la transacción</h5>
      <button type="button" class="close-button" (click)="closedDialog()">
        <span aria-hidden="true">×</span>
      </button>
    </div>

    <!-- Body -->
    <div class="popup-body">
      <div class="printable" id="printable-section">
        <!-- Company name for ticket header (only in print) -->
        <h1 class="only-printable">{{user.company_name}}</h1>
        <div *ngIf="transaction">
          <!-- Transaction details -->
          <p><strong>ID:</strong> {{ transaction.id }}</p>
          <p><strong>User:</strong> {{ transaction.user_id }}</p>
          <p>
            <strong>Date:</strong> {{ transaction.date | date:'fullDate' }}
            {{ transaction.date | date:'shortTime' }}
          </p>

          <!-- Total line with dotted divider above -->
          <p class="total-line">
            <strong>Total:</strong>
            <span class="total-amount"> ${{ transaction.total }}</span>
          </p>

          <!-- Optional dotted line for a perforation/ticket separation -->
          <hr class="only-printable ticket-divider" />
          
          <!-- Thank-you message visible only in print -->
          <p class="only-printable thank-you">Gracias por su compra!</p>
        </div>
      </div>
    </div>

    <!-- Footer (will not be printed) -->
    <div class="popup-footer non-printable">
      <button class="btn btn-primary" (click)="printPage()">Imprimir</button>
      <button class="btn btn-danger" *ngIf="transaction?.id !== undefined" (click)="deleteTransaction(transaction.id!)" [disabled]="!user?.token">Eliminar</button>
    </div>
  </div>
</div>
